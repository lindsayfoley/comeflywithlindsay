var toggleHamburgerNav = function() {
	
	$('.hamburger-container').click(function(e){
		$('nav').slideToggle().parents('body').toggleClass('nav-open');
		e.stopPropagation();
	});
};

var openBlogPostOutboundLinksInNewTab = function() {
	
	$('article a').each(function() {
		if($(this).attr('href').indexOf('http') != -1) {
			$(this).attr('target', '_blank');
		}
	});
};

var indicatePostType = function() {
	if($('#blog-post h5').length) {
		$('body').addClass('article');
	}
};

/* FB share button */
var addPageUrlToFBShareButton = function() {

	var fbSharerLink = $('.fb-share-button a').attr('href');
	var fbUrlPrefix = '?u=';
	var pageUrl = window.location.href;
	
	$('.social-share div').attr('data-href', pageUrl);
	$('.fb-share-button a').attr('href', fbSharerLink + fbUrlPrefix + pageUrl);
};

const registerBackToTopForClickEvent = () => {
	
	$('#toTop').on('click', function(e) {
	  e.preventDefault();
	  $('html, body').animate({scrollTop:0}, '300');
	});
}

const handleBackToTopClick = () => {
	
	$(window).scroll(function() {
		if($(window).scrollTop() > 300) {
			$('#toTop').addClass('show');
		} else {
			$('#toTop').removeClass('show');
		}
	});
	
	registerBackToTopForClickEvent();
}

const handleBackToTopTap = () => {
	
	$('#toTop').addClass('show');	
	registerBackToTopForClickEvent();
}

$(document).ready(function() {
	toggleHamburgerNav();
	addPageUrlToFBShareButton();	
	indicatePostType();
	
	if($(window).width() >= 800) {
		handleBackToTopClick();
	} else {
		handleBackToTopTap();
	}

	if($('body').attr('id') === 'blog-post') {
		openBlogPostOutboundLinksInNewTab();
	}	
});
