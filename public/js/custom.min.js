const toggleHamburgerNav = function() {
	
	$('.hamburger-container').click(function(e){
		
		$('nav').slideToggle().parents('body').toggleClass('nav-open');
		e.stopPropagation();
	});
};

const makeOutboundLinksOpenInNewTab = function() {
	
	$('article p > a[href]').each(function() {			

		if($(this).attr('href').substring(0) != '/') {
			$(this).attr('target', '_blank');
		}
	});
};

const indicatePostType = function() {
	
	if($('#blog-post h5').length) {
		$('body').addClass('article');
	}
};

/* FB share button */
const addPageUrlToFBShareButton = function() {

	const fbSharerLink = $('.fb-share-button a').attr('href');
	const fbUrlPrefix = '?u=';
	const pageUrl = window.location.href;
	
	$('.social-share div').attr('data-href', pageUrl);
	$('.fb-share-button a').attr('href', fbSharerLink + fbUrlPrefix + pageUrl);
};

const registerBackToTopForClicks = () => {
	
	$('#toTop').click(function(e) {
	  e.preventDefault();
	  $('html, body').animate({scrollTop:0}, '300');
	});
}

const handleBackToTopClick = () => {
			
	$(window).scroll(function() {		
		
		const scrollPosition = $(window).scrollTop();
		const footerHeight = $(window).width() >= 800 ? 700 : 1300;
		const positionAboveFooter = $(document).height() - footerHeight;
		
		if(scrollPosition > 300 && scrollPosition < positionAboveFooter) {
			$('#toTop').addClass('show');
		} else {
			$('#toTop').removeClass('show');
		}

	});
	
	registerBackToTopForClicks();
}

const handleBackToTopTap = () => {
	
	$('#toTop').addClass('show');	
	registerBackToTopForClicks();
}

$(document).ready(function() {
	toggleHamburgerNav();
	addPageUrlToFBShareButton();	
	indicatePostType();
	handleBackToTopClick();


	if($('body').attr('id') === 'blog-post') {
		makeOutboundLinksOpenInNewTab();
	}	
});
